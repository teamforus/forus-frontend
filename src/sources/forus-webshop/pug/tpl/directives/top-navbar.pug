nav.block.block-navbar#navigation-menu(ng-class='{"scrolled" : $dir.hideOnScroll && !$dir.visible}')
    announcements(
        ng-if="$root.appConfigs.features.announcements" 
        list="$root.appConfigs.features.announcements")

    .navbar-inner.wrapper   
        a.button(
            ui-sref="explanation"
            target="{{ $root.appConfigs.features.pages.explanation.external ? '_blank' : '_self' }}"
            ui-sref-active="active").show-sm
                include ../../../resources/_webshop-common/assets/img/icon-menu/icon-menu-info.svg
                div(
                    ng-if="$root.client_key != 'groningen'"
                    translate="topnavbar.items.{{ $root.appConfigs.client_key }}.explanation"
                    translate-default="{{ 'topnavbar.items.explanation' | translate }}")

                div(
                    ng-if="$root.client_key == 'groningen'"
                    translate="topnavbar.items.explanation")

        a(ui-sref="home").navbar-logo.show-sm
            img(ng-src="{{ './assets/img/logo-normal' + $dir.logoExtension }}" alt="Terug naar hoofdpagina")
            img(ng-src="{{ './assets/img/logo-hover' + $dir.logoExtension }}" alt="Terug naar hoofdpagina").hover

        .block.block-auth.show-sm
            .auth-in(ng-if="$root.auth_user").show-sm
                button.button.button-mobile(ng-click="$root.signOut()" role="button" aria-label="{{ 'topnavbar.buttons.logout' | translate }}")
                    include ../../../resources/_webshop-common/assets/img/icon-menu/icon-menu-sign-out.svg
                    div(translate="topnavbar.buttons.logout")

            .auth-out(ng-if="!$root.auth_user" id="login_mobile")                
                button.button.button-mobile(ng-click="$dir.startFundRequest()" role="button" aria-label="login").show-sm
                    include ../../../resources/_webshop-common/assets/img/icon-menu/icon-menu-my-profile2.svg
                    div(translate="topnavbar.buttons.login")
        
        ul.navbar-list#primary-menu.hide-sm
            li.navbar-item-wrapper
                a.navbar-item(
                    ui-sref="home"
                    ui-sref-active="active"
                    translate="topnavbar.items.home")

            li.navbar-item-wrapper(ng-if="$root.appConfigs.flags.fundsMenu && ($root.auth_user || $root.appConfigs.flags.fundsMenuIfLoggedOut)")
                a.navbar-item(
                    ui-sref="funds" 
                    target="_self"
                    ui-sref-active="active"
                    translate="topnavbar.items.{{ $root.appConfigs.client_key }}.funds"
                    translate-default="{{ 'topnavbar.items.funds' | translate }}")

            li.navbar-item-wrapper(
                ng-if="$root.appConfigs.features.has_budget_funds && $root.appConfigs.features.products.list && ($root.appConfigs.flags.productsMenu || $root.auth_user)")
                a.navbar-item(
                    ui-sref="products" 
                    ui-sref-active="active"
                    ng-bind="'topnavbar.items.products' | translate"
                    id="products_page")
            
            li.navbar-item-wrapper(
                ng-if="$root.appConfigs.features.has_subsidy_funds && $root.appConfigs.features.products.list && ($root.appConfigs.flags.productsMenu || $root.auth_user)")
                a.navbar-item(
                    ui-sref="actions" 
                    ui-sref-active="active"
                    ng-bind="'topnavbar.items.subsidies' | translate"
                    id="actions_page")
            
            li.navbar-item-wrapper(ng-if="$root.appConfigs.flags.providersMenu")
                a.navbar-item(
                    id="providers_page"
                    ui-sref="providers"
                    ui-sref-active="active"
                    ng-bind="'topnavbar.items.providers' | translate")

            li.navbar-item-wrapper(
                ng-class="{'navbar-item-wrapper_first-to-last' : !$root.appConfigs.flags.providersSignUpMenu}")
                a.navbar-item(
                    ui-sref="explanation"
                    ui-sref-active="active"
                    target="{{ $root.appConfigs.features.pages.explanation.external ? '_blank' : '_self' }}"
                    translate="topnavbar.items.{{ $root.appConfigs.client_key }}.explanation"
                    translate-default="{{ 'topnavbar.items.explanation' | translate }}")

            li.navbar-item-wrapper(
                ng-class="{'navbar-item-wrapper_first-to-last' : $root.appConfigs.flags.providersSignUpMenu}"
                ng-if="$root.appConfigs.flags.providersSignUpMenu")
                a.navbar-item(
                    id="providers_page"
                    ui-sref="sign-up"
                    ui-sref-active="active"
                    ng-bind="'topnavbar.items.signup' | translate")

            li.navbar-item-wrapper.navbar-item-wrapper_social_icons(
                ng-class="$root.appConfigs.features.social_medias.length ? '' : 'navbar-item-wrapper_first-to-last'")

                a.navbar-social-media-icon(
                    ng-repeat="social_media in $root.appConfigs.features.social_medias"
                    href="{{ social_media.url }}" 
                    title="{{ social_media.title }}"
                    target="_blank")
                    em.mdi(ng-class="'mdi-' + social_media.type")

            li.navbar-item-wrapper.navbar-item-wrapper_sign-out(ng-if="$root.auth_user")
                span.navbar-user(
                    dusk="identityEmail"
                    ng-if="$root.auth_user.email"
                    ng-bind="$root.auth_user.email | str_limit:27")

                a(role="button" tabindex="0" href="" ng-click="$root.signOut($event, true)")
                    span.navbar-item(translate="topnavbar.buttons.logout")
                    em.mdi.mdi-logout

    .block.block-subnav
        .subnav-inner.wrapper   
            a(ui-sref="home").navbar-logo.hide-sm
                img(
                    ng-src="{{ './assets/img/logo-normal' + $dir.logoExtension }}" 
                    alt="{{ $dir.orgLogoAltText }}")

            top-navbar-search(ng-if="$root.appConfigs.flags.genericSearch")

            .block.flex.hide-sm
                .block.block-auth
                    button.button.button-default(
                        ng-if="!$root.auth_user && $root.appConfigs.flags.showStartButton"
                        ng-click="$dir.startFundRequest({ restore_with_email: true })"
                        role="button")

                        include ../../../resources/_webshop-common/assets/img/icon-menu/icon-menu-start.svg

                        span(ng-bind="$root.appConfigs.flags.showStartButtonText || 'Start'")

                    button.button.button-primary(
                        ng-if="!$root.auth_user"
                        ng-click="$dir.startFundRequest()"
                        role="button"
                        dusk="btnStart")

                        include ../../../resources/_webshop-common/assets/img/icon-menu/icon-menu-apply.svg

                        span(
                            translate="home.header.{{ $root.client_key }}.button" 
                            translate-default="{{ 'home.header.button' | translate }}" 
                            id="start_modal")

                    a(ng-if="$root.auth_user" ui-sref="vouchers" id="vouchers" dusk="userVouchers").button.button-primary
                        em.mdi.mdi-ticket-confirmation
                        span(translate="topnavbar.buttons.{{ $root.client_key }}.voucher" translate-default="{{ 'topnavbar.buttons.voucher' | translate }}")

                    .auth-in(ng-if="$root.auth_user").hide-sm
                        .auth-user(
                            dusk="userProfile"
                            ng-click="$dir.openUserMenu($event)" 
                            aria-haspopup="true" 
                            id="user_menu" 
                            aria-expanded="{{$dir.userMenuOpened}}" 
                            role="link" 
                            aria-label="Gebruikersmenu")

                            .auth-user-avatar
                            .auth-user-caret: em(ng-class="$dir.userMenuOpened ? 'mdi-chevron-up' : 'mdi-chevron-down'").mdi

                            .auth-user-menu.hide-sm.active(
                                aria-labelledby="user_menu"
                                ng-class="{active: $dir.userMenuOpened}"
                                ng-if="$dir.userMenuOpened"
                                click-outside="$dir.hideUserMenu()")

                                .triangle
                                .inner(prevent-propagation)
                                    .auth-user-menu-user(ng-if="$root.auth_user.email")
                                        span.text-strong-half Ingelogd als: #[br]
                                        span(ng-bind="$root.auth_user.email | str_limit:27")

                                    .auth-user-menu-separator(ng-if="$root.auth_user.email")

                                    .auth-user-menu-item(
                                        ng-click="$dir.startFundRequest()" 
                                        id="open_activation_code_popup"
                                        role="link")
                                        img(src="./assets/img/icon-menu/icon-menu-my-vouchers.svg" alt="")
                                        span(translate="topnavbar.buttons.activate_{{ $root.client_key }}" translate-default="{{ 'topnavbar.buttons.activate' | translate }}")

                                    .auth-user-menu-item(
                                        ng-click="$dir.openPinCodePopup()" 
                                        id="open_pincode_popup"
                                        role="link")
                                        em.mdi.mdi-cellphone
                                        span(translate="topnavbar.buttons.authorize")
                                        
                                    .auth-user-menu-item(
                                        ng-if="$root.appConfigs.flags.show2FAMenu || $root.auth_2fa.required"
                                        ui-sref="security-2fa"
                                        ng-click="$dir.goToState('security-2fa')"
                                        role="link")
                                        em.mdi.mdi-security
                                        | Beveiliging

                                    .auth-user-menu-item(
                                        ng-if="$root.appConfigs.sessions"
                                        ui-sref="security-sessions"
                                        ng-click="$dir.goToState('security-sessions')"
                                        role="link"
                                        tabindex="0")
                                        em.mdi.mdi-shield-account
                                        | Sessies
                                    
                                    .auth-user-menu-item(
                                        ui-sref="notifications"
                                        ui-sref-active="active"
                                        ng-click="$dir.goToState('notifications')"
                                        role="link"
                                        tabindex="0")
                                        em.mdi.mdi-bell-outline
                                        span Notificaties
                                        
                                    .auth-user-menu-item(
                                        ui-sref="preferences-notifications"
                                        ui-sref-active="active"
                                        id="notification_preferences"
                                        ng-click="$dir.goToState('preferences-notifications')"
                                        role="link"
                                        tabindex="0")
                                        em.mdi.mdi-cog-outline
                                        translate(translate="notification_preferences.title_preferences")

                                    .auth-user-menu-item(
                                        ui-sref="identity-emails"
                                        ui-sref-active="active"
                                        id="identity_emails"
                                        ng-click="$dir.goToState('identity-emails')"
                                        dusk="btnUserEmails"
                                        role="link"
                                        tabindex="0")
                                        em.mdi.mdi-at 
                                        translate(translate="email_preferences.title_preferences")

                                    .auth-user-menu-separator.show-sm
                                    
                                    .auth-user-menu-item.show-sm(
                                        ui-sref="funds"
                                        ui-sref-active="active"
                                        ng-if="$root.auth_user"
                                        ng-click="$dir.goToState('funds')"
                                        role="link"
                                        tabindex="0")
                                        em.mdi.mdi-star-outline
                                        span(translate="topnavbar.buttons.logout")
                                    
                                    .auth-user-menu-item.show-sm(
                                        ui-sref="products" 
                                        ui-sref-active="active"
                                        ng-if="$root.appConfigs.features.products.list"
                                        ng-click="$dir.goToState('products')"
                                        role="link"
                                        tabindex="0")
                                        em.mdi.mdi-store
                                        span(translate="topnavbar.buttons.products")
                                    
                                    .auth-user-menu-item.show-sm(
                                        ui-sref="providers" 
                                        ui-sref-active="active"
                                        ng-if="$root.appConfigs.flags.providersMenu"
                                        ng-click="$dir.goToState('providers')"
                                        role="link"
                                        tabindex="0")
                                        em.mdi.mdi-store
                                        span(translate="topnavbar.items.providers")
                                        
                                    .auth-user-menu-separator.show-sm
                                    
                                    .auth-user-menu-item.show-sm(
                                        ui-sref="vouchers" 
                                        ui-sref-active="active"
                                        ng-click="$dir.goToState('vouchers')"
                                        role="link"
                                        tabindex="0")
                                        em.mdi.mdi-ticket-confirmation
                                        span(translate="topnavbar.buttons.voucher")

                                    .auth-user-menu-separator

                                    .auth-user-menu-item(
                                        id="sign_out"
                                        ng-click="$root.signOut()"
                                        role="link"
                                        dusk="btnUserLogout"
                                        tabindex="0")
                                        img(src="./assets/img/icon-menu/icon-menu-sign-out.svg" alt="")
                                        span(translate="topnavbar.buttons.logout")

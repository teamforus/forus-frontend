block content
    .header-splash: .splash.splash-c
    top-navbar
    .block.block-provider
        .provider-map: .block.block-google-map: google-map(
            ng-if="$ctrl.mapOptions"
            map-pointers="$ctrl.provider.offices" 
            map-pointer-template="providers-office-view"
            map-options="$ctrl.mapOptions"
            map-gesture-handling="'none'")
        .provider-content
            .block.block-pane
                .pane-head Organisatie informatie
                .pane-section: .provider-details
                    .provider-description
                        img(ng-src="{{ $ctrl.provider.logo.sizes.thumbnail || '/assets/img/placeholders/organization-thumbnail.png' }}").provider-logo
                        .provider-title(ng-bind="$ctrl.provider.name")

                .pane-section.pane-section-compact-vertical
                    .block.block-data-list
                        .data-list-row(ng-if="$ctrl.office.address")
                            .data-list-key Adres:
                            .data-list-value(ng-bind="$ctrl.office.address")
                        
                        .data-list-row(ng-if="$ctrl.provider.email")
                            .data-list-key E-mailadres:
                            .data-list-value(ng-bind="$ctrl.provider.email")
                        
                        .data-list-row(ng-if="$ctrl.provider.phone")
                            .data-list-key Telefoonnummer:
                            .data-list-value(ng-bind="$ctrl.provider.phone")
                        
                        .data-list-row(ng-if="$ctrl.provider")
                            .data-list-key Organisatie type:
                            .data-list-value
                                .label.label-default.label-sm {{ $ctrl.provider.business_type.name || 'Geen organisatie type' }}
            
            .block.block-pane.last-child: .pane-head.flex-row 
                .flex-grow Vestigingen
                .pane-head-count(ng-bind="$ctrl.provider.offices.length")
            
            .block.block-organizations
                .organization-item
                    .organization-offices: .block.block-offices
                        a(ng-repeat="office in $ctrl.provider.offices" ng-click="$ctrl.goToOffice(office)").office-item
                            .office-item-map-icon: .mdi.mdi-map-marker
                            .office-pane
                                .office-pane-block
                                    .office-logo: img(
                                        ng-src="{{ office.photo.sizes.thumbnail || '/assets/img/placeholders/office-thumbnail.png' }}"
                                        ).office-logo-img
                                    .office-details
                                        .office-title(ng-bind="office.address")
                                        .office-labels
                                            .label.label-default(ng-bind="$ctrl.provider.business_type.name || 'Geen organisatie type'")
                                        
                                        div(ng-if="office.phone || provider.phone || provider.email")
                                            .office-info.office-info-inline(ng-if="office.phone || provider.phone")
                                                .mdi.mdi-phone-outline
                                                | {{ office.phone ? office.phone : provider.phone }}
                                            
                                            .office-info.office-info-inline(ng-if="provider.email")
                                                .mdi.mdi-email-outline
                                                | {{ provider.email }}
            
            br
            .block.block-pane: .pane-head.flex-row  
                .flex-grow Products

            .block.block-products    
                .product-item(ng-repeat="product in $ctrl.shownProducts").discounted
                    a(ui-sref="products-show(product)").product-item-inner
                        .product-image(style="background-image: url('{{ product.photo.sizes.small || './assets/img/placeholders/product-small.png' }}')")
                            img(ng-src="{{ product.photo.sizes.small || './assets/img/placeholders/product-small.png' }}")
                        .product-details
                            .product-organization
                                span(ng-bind="product.organization.name")
                            .product-name.truncated(ng-bind="product.name")
                            .product-discount(ng-if="product.isDiscounted")
                                | {{ product.old_price == 0 ? 0 : (100 - (product.price / product.old_price) * 100) | to_fixed:0 }}%
                                br
                                | {{ "block_products.labels.discount" | translate }}
                            .product-discount(ng-if="!product.isDiscounted").hide-sm
                                | &nbsp;
                                br
                                | &nbsp;
                            .product-price
                                small(ng-if="product.isDiscounted") {{ "block_products.labels.old" | translate }} {{ product.old_price | currency_format }}
                                small(ng-if="!product.isDiscounted").hide-sm &nbsp;
                                | {{ "block_products.labels.new" | translate }} {{ product.price | currency_format }}

            .block.block-show-more(ng-if="$ctrl.provider.products && $ctrl.shownProducts.length < $ctrl.provider.products.length") 
                a(ng-click="$ctrl.showMoreProducts()" translate="block_products.buttons.more").button.button-primary.button-wide

            .block.block-show-more(ng-if="$ctrl.provider.products && $ctrl.shownProducts.length >= $ctrl.provider.products.length") 
                a(ng-click="$ctrl.showLessProducts()" translate="block_products.buttons.less").button.button-primary.button-wide                                  



- var src_prefix = (qdt_c.platform.env_data.html5ModeEnabled?qdt_c.platform.env_data.html5Mode.basePath:'');
.app.app-container: .block.block-sign-up-steps
    section.section.section-product: .wrapper
        mixin progress()
            .sign_up-progress
                .sign_up-step(
                    ng-repeat="step in $ctrl.totalSteps"
                    ng-class="$ctrl.step == step - 1 ? 'sign_up-step-active' : ($ctrl.step > step ? 'sign_up-step-done' : '')"
                    ng-bind="'Stap ' + step")

        //- Step card header
        mixin card_header(step)
            .sign_up-pane-header(translate="sign_up.header.title_step_" + step)         
            
        .block.block-sign_up: .block-wrapper
            //- Log in
            div(ng-if="$ctrl.step == 1")
                h2.block-title
                //- p.block-description
                    | U staat op het punt om een zomer zwemregeling aan te vragen. Om te kijken of u in aanmmerking komt, dient u uw 
                    strong woonplaats 
                    | en 
                    a(href="#") inkomen 
                    | te controleren 
                
                +progress()
                
                .sign_up-pane
                    +card_header(1)

                    .sign_up-pane-body
                        .sign_up-pane-text
                            | Bedankt dat u wil aanmelden als aanbieder. De volledige aanmeld procedure duurt ongeveer 5 minuten. Klanten zullen bij u in de winkel komen met een plaatje (QR code),  bekend van toegangskaartjes en vliegtickets. Deze code scant u met een app die u in de volgende stap gaat instaleren. Zorg dat u de volgende zaken alvast bij de hand heeft: 
                        
                        ul.sign_up-pane-list 
                            li(ng-repeat="field in $ctrl.readMoreFields") {{ field }}
                        
                        a(ng-click="$ctrl.next()" ).next-link 
                            translate(translate="sign_up.sms.button.send") 
                            em.mdi.mdi-arrow-right-bold
                            

                        //- .sign_up-pane-heading Heeft u de Me App al?
                        //- .sign_up-pane-text 
                        //-     | De me app is een optionele manier om eenvoudig, 
                        //-     | veilig en snel in te loggen.                    

                        //- .sign_up-pane-auth
                        //-     .sign_up-pane-auth-content
                        //-         | Scan de QR code aan de rechterzijde met de 
                        //-         br
                        //-         | QR-scanner in de Me App.
                        //-         br
                        //-         br
                        //-         | De Me App wordt gebruikt omm makkelijk en veilig in 
                        //-         br
                        //-         | te loggen, betalingen te doen en vouchers te beheren.
                        //-         br
                        //-         br
                        //-         .sign_up-pane-auth-apps
                        //-             a(href="#").sign_up-pane-auth-app-item: img(src=src_prefix + "./assets/img/icon-app-ios.svg")
                        //-             a(href="#").sign_up-pane-auth-app-item: img(src=src_prefix + "./assets/img/icon-app-android.svg")
                            
                        //-     .sign_up-pane-auth-qr_code
                        //-         qr-code(
                        //-             ng-if="$ctrl.authToken" 
                        //-             qr-value="$ctrl.authToken" 
                        //-             qr-type="auth_token" 
                        //-             qr-logo=src_prefix + "./assets/img/me-logo.png")
            
            //- Log in email sent
            div(ng-if="$ctrl.step == 2")
                h2.block-title
                
                +progress()
                
                .sign_up-pane
                    +card_header(2)

                    .sign_up-pane-body
                        .sign_up-pane-text
                            | U gaat de app installeren waarmee u de betalingen zal uitvoeren. 
                            | In de app maakt u eerst zelf een profiel, later kan u eventueel meerdere (kassa) medewerkers toevoegen die namens u betalingen kunnen uitvoeren.

                        .sign_up-pane-heading De app installeren
                        .sign_up-pane-text 
                            | De app kan op vrijwel elke smartphone gebruikt worden en is beschikbaar op iOS en Android. 
                            | Vul uw telefoon nummer in om een download link te ontvangen, of ga op uw mobiele telefoon naar www.forus.io/DL

                        .sign_up-pane-heading Vul uw mobiele nummer in            
                            phone-control(ng-model="phoneForm.values.phone" cant-delete-length="2")
                            .pincode-errors.text-center: .form-error(ng-repeat="error in phoneForm.errors.phone" ng-bind="error")

                        .card-section.card-section-primary.text-left(ng-if="!$ctrl.sentSms")
                            button(ng-click="$ctrl.next()" translate="sign_up.sms.button.send").button.button-primary

                        .card-section.card-section-primary.text-left(ng-if="$ctrl.sentSms")
                            .card-title(translate="sign_up.sms.sent")
                            .card-subtitle(translate="sign_up.sms.sent_description")
                            
                        .sign_up-pane-auth
                            .sign_up-pane-auth-content
                                | Scan de QR code aan de rechterzijde met de 
                                br
                                | QR-scanner in de Me App.
                                br
                                br
                                | De Me App wordt gebruikt omm makkelijk en veilig in 
                                br
                                | te loggen, betalingen te doen en vouchers te beheren.
                                br
                                br
                                .sign_up-pane-auth-apps
                                    a(href="#").sign_up-pane-auth-app-item: img(src=src_prefix + "./assets/img/icon-app-ios.svg")
                                    a(href="#").sign_up-pane-auth-app-item: img(src=src_prefix + "./assets/img/icon-app-android.svg")
                            
                            .sign_up-pane-auth-qr_code
                                qr-code(
                                    ng-if="$ctrl.authToken" 
                                    qr-value="$ctrl.authToken" 
                                    qr-type="auth_token" 
                                    qr-logo=src_prefix + "./assets/img/me-logo.png")

                .step-footer(ng-if="$ctrl.has_app")
                    a(translate="sign_up.buttons.go_step_2" ng-click="$ctrl.skipToStep(2)").button.button-primary                
            
            //- List the criteria
            div(ng-if="$ctrl.step == 3")
                h2.block-title
                
                +progress()
                
                .sign_up-pane
                    +card_header(3)
                    
                    .sign_up-pane-body
                        .sign_up-pane-text
                            | Om deel te kunnen nemen, gaat u uw organisatie aanmaken. 
                            | Door de gegevens in te vullen zal u de betalingen automatisch op uw rekening ontvangen, u hoeft hier straks zelf verder niks meer voor te doen.

                        .sign_up-pane-text: form(ng-submit="$ctrl.next()").form: .row
                            .card-section: .pseudo-wrapper
                                .row.group-block
                                    .col.col-md-8
                                        .form-group.col
                                            label.form-label(translate="organization_edit.labels.name")
                                            ui-control-text(
                                                ng-model="$ctrl.organizationForm.values.name"
                                                data-id="criterion_{{ invalidCriteria.id }}"
                                                data-placeholder="Bedrijfsnaam")
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.name" ng-bind="error")
                                        
                                        .form-group.col
                                            label.form-label
                                                translate(translate="organization_edit.labels.bank")
                                                tooltip(text="'Vul hier het rekeningnummer in waar u de betalingen op wilt ontvangen'")
                                            ui-control-text(
                                                ng-model="$ctrl.organizationForm.values.iban" 
                                                data-placeholder="IBAN-nummer")
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.iban" ng-bind="error")
                                        
                                        .form-group.col
                                            label.form-label
                                                translate(translate="HERHAAL IBAN–NUMMER")
                                                tooltip(text="'Vul hier het rekeningnummer in waar u de betalingen op wilt ontvangen'")
                                            ui-control-text(
                                                ng-model="$ctrl.organizationForm.values.hiban" 
                                                data-placeholder="HERHAAL IBAN–NUMMER")
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.iban" ng-bind="error")
                                    
                                    .col.col-md-4
                                        photo-selector.col(
                                            template="photo-selector-sign_up"
                                            type="organization_logo"
                                            thumbnail="$ctrl.media.sizes.thumbnail" 
                                            select-photo="$ctrl.selectPhoto(file)")
                                        .info-block.info-block-primary
                                            | De afbeelding dient vierkant te zijn met een minimum afmeting van 400x400px. 
                                            br
                                            | Toegestaande formaten: .JPG, .PNG    

                                .row.group-block
                                    .col
                                        .form-group.col
                                            label(translate="organization_edit.labels.mail").form-label
                                            .row
                                                .col.col-md-8: ui-control-text(
                                                    ng-model="$ctrl.organizationForm.values.email"
                                                    placeholder="E-mailadres")

                                                .col.col-md-4: ui-control-checkbox(
                                                    name="email_public" 
                                                    data-id="email_public_input"
                                                    data-label="{{ 'Maak publiek' | i18n }}" 
                                                    ng-model="$ctrl.organizationForm.values.email_public")
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.email" ng-bind="error")
                                        
                                        .form-group.col
                                            label(translate="organization_edit.labels.phone").form-label
                                            .row
                                                .col.col-md-8: ui-control-text(
                                                    ng-model="$ctrl.organizationForm.values.phone"
                                                    placeholder="Telefoonnummer")
                                                .col.col-md-4: ui-control-checkbox(
                                                    name="phone_public" 
                                                    data-id="phone_public_input"
                                                    data-label="{{ 'Maak publiek' | i18n }}" 
                                                    ng-model="$ctrl.organizationForm.values.phone_public")
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.phone" ng-bind="error")

                                        .form-group.col
                                            label(translate="organization_edit.labels.website").form-label
                                            .row
                                                .col.col-md-8: ui-control-text(
                                                    ng-model="$ctrl.organizationForm.values.website"
                                                    placeholder="Website")
                                                .col.col-md-4: ui-control-checkbox(
                                                    name="website_public" 
                                                    data-id="website_public_input"
                                                    data-label="{{ 'Maak publiek' | i18n }}" 
                                                    ng-model="$ctrl.organizationForm.values.website_public")
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.website" ng-bind="error")
                    
                                .row.group-block
                                    .col.col-md-8
                                        .form-group.col
                                            .form-label(translate="organization_edit.labels.business_type")
                                            .form-offset: select-control(
                                                ng-model="$ctrl.businessType" 
                                                ng-change="$ctrl.chageBusinessType(value)"
                                                options="$ctrl.businessTypes"
                                                placeholder="Selecteer organisatie type...")
                                            .form-error(
                                                ng-repeat="error in $ctrl.organizationForm.errors.business_type_id" 
                                                ng-bind="error")

                                        .form-group.col
                                            label(translate="organization_edit.labels.kvk").form-label
                                            ui-control-text(
                                                ng-model="$ctrl.organizationForm.values.kvk"
                                                data-placeholder="KvK-nummer")
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.kvk" ng-bind="error")

                                        .form-group.col
                                            label(translate="organization_edit.labels.tax").form-label
                                            ui-control-text(
                                                ng-model="$ctrl.organizationForm.values.btw"
                                                data-placeholder="BTW-nummer")
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.btw" ng-bind="error")   

                                .row 
                                    button(type="submit").next-link 
                                        translate(translate="sign_up.sms.button.send")
                                        em.mdi.mdi-arrow-right-bold                       


            //- Confirm net worth
            div(ng-if="$ctrl.step == 4")
                h2.block-title
                
                +progress()
                
                .sign_up-pane
                    +card_header(4)

                    .sign_up-heading-block Als u een of meerdere vestigingen heeft, kan u deze hieronder toevoegen. Uw vestigingen zullen op een kaart in de webwinkel verschijnen.
                    
                    .sign_up-pane-text: form(ng-submit="$ctrl.next()").form
                        .card-section: .pseudo-wrapper
                            .row.group-block.padding-30
                                .col.col-md-8
                                    .form-group.col
                                        label.form-label(translate="Street, building number")
                                        ui-control-text(
                                            ng-model="$ctrl.organizationForm.values.phone.street"
                                            data-id="criterion_street"
                                            data-placeholder="Street, building number")
                                        .form-error(ng-repeat="error in $ctrl.organizationForm.errors.name" ng-bind="error")
                                    
                                    .form-group.col
                                        label.form-label
                                            translate(translate="Telefoonnummer")
                                        ui-control-text(
                                            ng-model="$ctrl.organizationForm.values.phone" 
                                            data-placeholder="Telefoonnummer")
                                        .form-error(ng-repeat="error in $ctrl.organizationForm.errors.iban" ng-bind="error")
                                
                                .col.col-md-4
                                    photo-selector.col(
                                        template="photo-selector-sign_up"
                                        type="organization_logo"
                                        thumbnail="$ctrl.media.sizes.thumbnail" 
                                        select-photo="$ctrl.selectPhoto(file)")
                                    .info-block.info-block-primary
                                        | De afbeelding dient vierkant te zijn met een minimum afmeting van 400x400px. 
                                        br
                                        | Toegestaande formaten: .JPG, .PNG    

                            .row.group-block.padding-30
                                .col.opening
                                    .sign_up-pane-text Openingstijden
                                    
                                    .form-group.col
                                        .row
                                            ui-control-checkbox(
                                                name="phone_public" 
                                                data-id="phone_public_input"
                                                data-label="{{ 'All weekdays have same hours' }}" 
                                                ng-model="$ctrl.organizationForm.values.phone_public")
                                        .form-error(ng-repeat="error in $ctrl.organizationForm.errors.phone" ng-bind="error")

                                    .form-group.col
                                        .row
                                            ui-control-checkbox(
                                                name="website_public" 
                                                data-id="website_public_input"
                                                data-label="{{ 'Saturday and Sunday have same hours' }}" 
                                                ng-model="$ctrl.organizationForm.values.website_public")
                                        .form-error(ng-repeat="error in $ctrl.organizationForm.errors.website" ng-bind="error")
                
                            .row.group-block.padding-30
                                .col.col-md-8
                                    table.schedule
                                        tr 
                                            th Day
                                            th Open
                                            th Start
                                            th End
                                        tr(ng-repeat="weekDay in $ctrl.weekDays track by $index")
                                            td {{ weekDay }}  
                                            td 
                                                ui-control-checkbox(
                                                    name="is_opened{{$index}}" 
                                                    data-id="schedule_is_opened{{$index}}"
                                                    ng-model="$ctrl.organizationForm.values.workDays[$index].is_opened")     
                                            td
                                                ui-control-text(
                                                    ng-model="$ctrl.organizationForm.values.iban" 
                                                    data-placeholder="08:00")          
                                            td
                                                ui-control-text(
                                                    ng-model="$ctrl.organizationForm.values.iban" 
                                                    data-placeholder="16:00")      
                            
                            .row.group-block.description                              
                                | Weekdays from 08:00 till 16:00. 
                                br 
                                | Saturdays from 00:00 till 23:59, closed on Sunday. 
                                br 
                                | Break on Monday from 12:00 till 14:00
                    
                    .location-btns: .row
                        .col.col-lg-4.text-left
                            button.button-text.button-text-padless(ng-click="$ctrl.saveLocation()")
                                | Save location
                        .col.col-lg-8.text-right
                            button.button-text.button-text-padless(ng-click="$ctrl.addLocation()")
                                | Add location

                    .sign_up-pane-footer: .row
                        .col.col-lg-6.text-left: .button.button-text.button-text-padless(
                            ng-click="$ctrl.back()")
                            | Vorige stap
                            em.mdi.mdi-chevron-left.icon-lefts
                        .col.col-lg-6.text-right
                            .button.button-text.button-text-padless(ng-click="$ctrl.next()")
                                | Volgende stap
                                em.mdi.mdi-chevron-right.icon-right
            
            div(ng-if="$ctrl.step == 5")
                h2.block-title Zomerzwemregeling aanvraag
                +progress()
                
                .sign_up-pane
                    +card_header(5)

                    .sign_up-pane-body
                        .sign_up-pane-text
                            | In deze stap kunnen kassa medewerkers worden toegevoegd aan de organisatie. 
                            | Deze medewerkers kunnen vervolgens ook vouchers scannen met de kassa app en betalingen verwerken. 
                            | Er zal een uitnodiging met instructies verstuurd worden naar de email adressen die hieronder ingevuld worden. 
                            | Als u geen medewerkers wil toevoegen kan u deze stap overslaan.

                        .sign_up-pane-text: form(ng-submit="$ctrl.next()").form: .row
                            .card-section: .pseudo-wrapper
                                .row.group-block
                                    .col.col-md-7
                                        .form-group.col
                                            label.form-label(translate="EMAIL")
                                            ui-control-text(
                                                ng-model="$ctrl.employeeForm.values.email"
                                                data-id="employee"
                                                data-placeholder="EMAIL").large
                                            .form-error(ng-repeat="error in $ctrl.organizationForm.errors.name" ng-bind="error")
                                    
                                    .col.col-md-5
                                        .form-group.col
                                        label.form-label &nbsp;
                                        button(
                                            ng-class="{'button-disabled': !$ctrl.authForm.values.records.primary_email}"
                                            type="submit").button.button-primary.button-fill Add employee 

                        .button.button-text.button-text-padless.add-employee(ng-click="$ctrl.addEmployee()") Add new employee                     

                    .sign_up-pane-footer: .row
                        .col.col-lg-6.text-left: .button.button-text.button-text-padless(
                            ng-click="$ctrl.back()")
                            | Vorige stap
                            em.mdi.mdi-chevron-left.icon-lefts
                        .col.col-lg-6.text-right
                            .button.button-text.button-text-padless(ng-click="$ctrl.next()")
                                | Volgende stap
                                em.mdi.mdi-chevron-right.icon-right
            //- Done
            div(ng-if="$ctrl.step == 6")
                h2.block-title Zomerzwemregeling aanvraag
                .sign_up-pane
                    .sign_up-pane-header Aanvraag voltooid
                    .sign_up-pane-body: form(ng-submit="$ctrl.submitCriteria(invalidCriteria)").form.row
                        .form-group.col.col-lg-12
                            .block-icon: img(src=src_prefix + "./assets/img/icon-sign_up-success.svg")
                            p.sign_up-pane-text.text-center 
                                | We gaan controleren of uw gegevens kloppen, u ontvangt een email op blabla@blabla.com wanneer de aanvraag is afgerond, of indien er nog overige vragen zijn
                    
                            .text-center: .button.button-default(ng-click="$ctrl.finish()") Terug naar het dashboard
                        .form-group.col.col-lg-12: br
            
            //- Error
            div(ng-if="$ctrl.state == 'error'")
                h2.block-title Zomerzwemregeling aanvraag
                .sign_up-pane
                    .sign_up-pane-header Error during sign up request submission.
                    .sign_up-pane-body: .row
                        .form-group.col.col-lg-12
                            .block-icon: .mdi.mdi-close
                            p.sign_up-pane-text.text-center 
                                | Reason: 
                                span(ng-bind="$ctrl.errorReason")
                    
                            .text-center: .button.button-default(ng-click="$ctrl.finish()") Terug naar het dashboard
                        .form-group.col.col-lg-12: br
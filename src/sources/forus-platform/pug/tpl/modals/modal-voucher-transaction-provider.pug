.modal.modal-md.modal-voucher-transaction-provider.modal-animated(
    ng-if="$ctrl.modal.ready"
    ng-class="[$ctrl.modalClass, $ctrl.modal.loaded ? '' : 'modal-loading']")
    .modal-backdrop(ng-click="$ctrl.onClose()")

    //- Form
    .modal-window(ng-if="$ctrl.state == 'form'")
        .modal-close.mdi.mdi-close(ng-click="$ctrl.onClose()" role="button")
        .modal-header(translate="modals.modal_voucher_transaction_provider.title")

        .modal-body.modal-body-visible.form
            .modal-section.modal-section-pad
                //- Provider
                .form-group.form-group-inline.form-group-inline-md
                    label.form-label.form-label-required(translate="modals.modal_voucher_transaction_provider.labels.provider")
                    select-control(
                        prop="id"
                        ng-model="$ctrl.form.values.provider_id"
                        options="$ctrl.providers").form-control
                    .form-error(ng-repeat="error in $ctrl.form.errors.provider_id" ng-bind="error")

                //- Amount
                .form-group.form-group-inline.form-group-inline-md
                    label.form-label.form-label-required(translate="modals.modal_voucher_transaction_provider.labels.amount")
                    .form-offset
                        input(  
                            type="number" 
                            placeholder="{{ 'modals.modal_voucher_transaction_provider.labels.amount' | translate }}"
                            ng-model="$ctrl.form.values.amount"
                            step=".01"
                            min=".02"
                            max="{{ $ctrl.voucher.amount_available }}").form-control
                        .form-hint(ng-if="!$ctrl.form.errors.amount") Limiet {{ $ctrl.voucher.amount_available | currency_format }}
                        .form-error(ng-repeat="error in $ctrl.form.errors.amount" ng-bind="error")

                //- Note
                .form-group.form-group-inline.form-group-inline-md
                    label.form-label(translate="modals.modal_voucher_transaction_provider.labels.note")
                    .form-offset
                        textarea(
                            placeholder="{{ 'modals.modal_voucher_transaction_provider.labels.note' | translate }}"
                            ng-model="$ctrl.form.values.note").form-control.r-n
                        .form-hint(ng-if="!$ctrl.form.errors.note") Max. 255 tekens
                        .form-error(ng-repeat="error in $ctrl.form.errors.note" ng-bind="error")

        //- Submit
        .modal-footer.text-center
            //- Cancel
            button.button.button-default(
                type="button"
                ng-click="$ctrl.onClose()"
                translate="modals.modal_voucher_transaction_provider.buttons.cancel")

            //- Submit
            button.button.button-primary(
                type="button"
                ng-disabled="!$ctrl.form.values.provider_id || !$ctrl.form.values.amount"
                ng-click="$ctrl.state = 'preview'"
                translate="modals.modal_voucher_transaction_provider.buttons.submit")

    //- Preview
    .modal-window(ng-if="$ctrl.state == 'preview'")
        .modal-close.mdi.mdi-close(ng-click="$ctrl.onClose()" role="button")
        .modal-icon.modal-icon-primary: .mdi.mdi-alert-outline

        .modal-body.form
            .modal-section: .modal-heading.text-center(translate="modals.modal_voucher_transaction_provider.prevalidate.title")

            .modal-section
                .row: .col.col-lg-8.col-lg-offset-2: .block.block-compact-datalist
                    //- Provider
                    .datalist-row
                        .datalist-key.text-primary.text-right: strong(translate="modals.modal_voucher_transaction_provider.labels.provider")
                        .datalist-value(ng-bind="$ctrl.providersList[$ctrl.form.values.provider_id].name")

                    //- Sponsor name
                    .datalist-row
                        .datalist-key.text-primary.text-right: strong(translate="modals.modal_voucher_transaction_provider.labels.organization")
                        .datalist-value(ng-bind="$ctrl.organization.name")

                    //- Transaction amount
                    .datalist-row
                        .datalist-key.text-primary.text-right: strong(translate="modals.modal_voucher_transaction_provider.labels.amount")
                        .datalist-value(ng-bind="$ctrl.form.values.amount | currency_format")

                .modal-text.text-center.bordered(translate="modals.modal_voucher_transaction_provider.prevalidate.description")

        //- Submit
        .modal-footer.modal-footer-light.text-center
            //- Cancel
            button.button.button-default(
                type="button"
                ng-click="$ctrl.state = 'form'"
                translate="modals.modal_voucher_transaction_provider.buttons.cancel")

            //- Submit
            button.button.button-primary(
                type="button"
                ng-click="$ctrl.form.submit()"
                translate="modals.modal_voucher_transaction_provider.buttons.submit")

    //- Finish
    .modal-window(ng-if="$ctrl.state == 'finish'")
        .modal-close.mdi.mdi-close(ng-click="$ctrl.onClose()" role="button")
        .modal-icon.modal-icon-primary: .mdi.mdi-check-circle-outline

        .modal-body.form
            .modal-section.text-center
                .modal-heading(translate="modals.modal_voucher_transaction_provider.success.title")
                .modal-text(translate="modals.modal_voucher_transaction_provider.success.description")

            .modal-section
                .row: .col.col-lg-8.col-lg-offset-2: .block.block-compact-datalist
                    //- Provider name
                    .datalist-row
                        .datalist-key.text-primary.text-right: strong(translate="modals.modal_voucher_transaction_provider.labels.provider")
                        .datalist-value(ng-bind="$ctrl.providersList[$ctrl.form.values.provider_id].name")

                    //- Sponsor name
                    .datalist-row
                        .datalist-key.text-primary.text-right: strong(translate="modals.modal_voucher_transaction_provider.labels.organization")
                        .datalist-value(ng-bind="$ctrl.modal.scope.organization.name")

                    //- Transaction amount
                    .datalist-row
                        .datalist-key.text-primary.text-right: strong(translate="modals.modal_voucher_transaction_provider.labels.amount")
                        .datalist-value(ng-bind="$ctrl.form.values.amount | currency_format")

        //- Actions
        .modal-footer.modal-footer-light.text-centers
            button.button.button-primary(
                type="button"
                ng-click="$ctrl.onClose()"
                translate="modals.modal_voucher_transaction_provider.buttons.close")